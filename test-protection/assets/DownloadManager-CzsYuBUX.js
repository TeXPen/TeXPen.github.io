import{a as IA}from"./InferenceWorker-_gtIofs1.js";class gA{constructor(A,e,n){this.chunkSize=4*1024*1024,this.concurrency=4,this.url=A,this.store=e,this.abortController=new AbortController,n!=null&&n.chunkSize&&(this.chunkSize=n.chunkSize),n!=null&&n.concurrency&&(this.concurrency=n.concurrency),this.onProgress=n==null?void 0:n.onProgress}async start(){var E;const A=await fetch(this.url,{method:"HEAD",signal:this.abortController.signal});if(!A.ok)throw new Error(`Failed to fetch metadata for ${this.url}: ${A.statusText}`);const e=parseInt(A.headers.get("Content-Length")||"0",10),n=A.headers.get("ETag"),i=A.headers.get("Content-Type")||"application/octet-stream";if(e===0)throw new Error(`Invalid content length for ${this.url}`);const c=await this.store.initFile(this.url,e,i,n,this.chunkSize),o=[];let a=0;for(let B=0;B<c.totalChunks;B++)if(!c.chunks[B])o.push(B);else{const h=B*this.chunkSize,u=Math.min(h+this.chunkSize,e);a+=u-h}if(o.length===0){(E=this.onProgress)==null||E.call(this,{loaded:e,total:e});return}let g=0,s=0;return new Promise((B,h)=>{this.rejecter=h;const u=async()=>{var z;if(this.abortController.signal.aborted)return;if(s>=o.length){g===0&&B();return}const y=o[s++];g++;try{await this.downloadChunk(y,e);const N=y*this.chunkSize,p=Math.min(N+this.chunkSize,e);a+=p-N,(z=this.onProgress)==null||z.call(this,{loaded:a,total:e}),g--,u()}catch(N){if(g--,this.abortController.signal.aborted)return;this.abortController.abort(),h(N)}},k=Math.min(this.concurrency,o.length);for(let y=0;y<k;y++)u()})}async downloadChunk(A,e){const n=A*this.chunkSize,i=Math.min(n+this.chunkSize,e)-1,c=await fetch(this.url,{headers:{Range:`bytes=${n}-${i}`},signal:this.abortController.signal});if(!c.ok)throw new Error(`Failed to download chunk ${A}: ${c.statusText}`);const o=await c.blob();await this.store.saveChunk(this.url,A,o)}abort(){this.abortController.abort(),this.rejecter&&this.rejecter(new Error("Download aborted"))}}const X=(t,A)=>A.some(e=>t instanceof e);let V,O;function rA(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sA(){return O||(O=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K=new WeakMap,J=new WeakMap,x=new WeakMap;function dA(t){const A=new Promise((e,n)=>{const i=()=>{t.removeEventListener("success",c),t.removeEventListener("error",o)},c=()=>{e(l(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",c),t.addEventListener("error",o)});return x.set(A,t),A}function BA(t){if(K.has(t))return;const A=new Promise((e,n)=>{const i=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",o),t.removeEventListener("abort",o)},c=()=>{e(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",c),t.addEventListener("error",o),t.addEventListener("abort",o)});K.set(t,A)}let Z={get(t,A,e){if(t instanceof IDBTransaction){if(A==="done")return K.get(t);if(A==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return l(t[A])},set(t,A,e){return t[A]=e,!0},has(t,A){return t instanceof IDBTransaction&&(A==="done"||A==="store")?!0:A in t}};function nA(t){Z=t(Z)}function EA(t){return sA().includes(t)?function(...A){return t.apply(T(this),A),l(this.request)}:function(...A){return l(t.apply(T(this),A))}}function QA(t){return typeof t=="function"?EA(t):(t instanceof IDBTransaction&&BA(t),X(t,rA())?new Proxy(t,Z):t)}function l(t){if(t instanceof IDBRequest)return dA(t);if(J.has(t))return J.get(t);const A=QA(t);return A!==t&&(J.set(t,A),x.set(A,t)),A}const T=t=>x.get(t);function hA(t,A,{blocked:e,upgrade:n,blocking:i,terminated:c}={}){const o=indexedDB.open(t,A),a=l(o);return n&&o.addEventListener("upgradeneeded",g=>{n(l(o.result),g.oldVersion,g.newVersion,l(o.transaction),g)}),e&&o.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),a.then(g=>{c&&g.addEventListener("close",()=>c()),i&&g.addEventListener("versionchange",s=>i(s.oldVersion,s.newVersion,s))}).catch(()=>{}),a}const yA=["get","getKey","getAll","getAllKeys","count"],CA=["put","add","delete","clear"],G=new Map;function v(t,A){if(!(t instanceof IDBDatabase&&!(A in t)&&typeof A=="string"))return;if(G.get(A))return G.get(A);const e=A.replace(/FromIndex$/,""),n=A!==e,i=CA.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(i||yA.includes(e)))return;const c=async function(o,...a){const g=this.transaction(o,i?"readwrite":"readonly");let s=g.store;return n&&(s=s.index(a.shift())),(await Promise.all([s[e](...a),i&&g.done]))[0]};return G.set(A,c),c}nA(t=>({...t,get:(A,e,n)=>v(A,e)||t.get(A,e,n),has:(A,e)=>!!v(A,e)||t.has(A,e)}));const lA=["continue","continuePrimaryKey","advance"],W={},L=new WeakMap,iA=new WeakMap,uA={get(t,A){if(!lA.includes(A))return t[A];let e=W[A];return e||(e=W[A]=function(...n){L.set(this,iA.get(this)[A](...n))}),e}};async function*NA(...t){let A=this;if(A instanceof IDBCursor||(A=await A.openCursor(...t)),!A)return;A=A;const e=new Proxy(A,uA);for(iA.set(e,A),x.set(e,T(A));A;)yield e,A=await(L.get(e)||A.continue()),L.delete(e)}function j(t,A){return A===Symbol.asyncIterator&&X(t,[IDBIndex,IDBObjectStore,IDBCursor])||A==="iterate"&&X(t,[IDBIndex,IDBObjectStore])}nA(t=>({...t,get(A,e,n){return j(A,e)?NA:t.get(A,e,n)},has(A,e){return j(A,e)||t.has(A,e)}}));const D=class D{constructor(){this.dbPromise=hA(D.DB_NAME,D.DB_VERSION,{upgrade(A,e){A.objectStoreNames.contains("metadata")||A.createObjectStore("metadata",{keyPath:"url"}),A.objectStoreNames.contains("chunks")&&e<2&&A.deleteObjectStore("chunks"),A.objectStoreNames.contains("chunks")||A.createObjectStore("chunks")}})}async getMetadata(A){return await(await this.dbPromise).get("metadata",A)}async initFile(A,e,n,i,c){const a=(await this.dbPromise).transaction("metadata","readwrite"),g=a.objectStore("metadata"),s=await g.get(A),E=Math.ceil(e/c);if(s)if(s.etag!==i||s.totalBytes!==e)console.warn(`[ChunkStore] File changed for ${A}, resetting.`);else return s;const B={url:A,totalBytes:e,mimeType:n,etag:i,lastModified:Date.now(),chunkSize:c,totalChunks:E,chunks:new Array(E).fill(!1)};return await g.put(B),await a.done,B}async saveChunk(A,e,n){const c=(await this.dbPromise).transaction(["metadata","chunks"],"readwrite");await c.objectStore("chunks").put(n,[A,e]);const o=c.objectStore("metadata"),a=await o.get(A);a&&(a.chunks[e]||(a.chunks[e]=!0,a.lastModified=Date.now(),await o.put(a))),await c.done}async getChunk(A,e){return await(await this.dbPromise).get("chunks",[A,e])}async deleteFile(A){const n=(await this.dbPromise).transaction(["metadata","chunks"],"readwrite");await n.objectStore("metadata").delete(A);const i=n.objectStore("chunks"),c=IDBKeyRange.bound([A,0],[A,1/0]);let o=await i.openCursor(c);for(;o;)await o.delete(),o=await o.continue();await n.done}async getStream(A){const e=await this.dbPromise,n=await e.get("metadata",A);if(!n)throw new Error(`Missing metadata for ${A}`);let i=0;const c=n.totalChunks;return new ReadableStream({async pull(o){if(i>=c){o.close();return}try{const a=await e.get("chunks",[A,i]);if(!a){o.error(new Error(`Missing chunk ${i} for ${A}`));return}const g=await a.arrayBuffer();o.enqueue(new Uint8Array(g)),i++}catch(a){o.error(a)}}})}};D.DB_NAME="texpen-downloads-v3",D.DB_VERSION=2;let Y=D;/*!
 * hash-wasm (https://www.npmjs.com/package/hash-wasm)
 * (c) Dani Biro
 * @license MIT
 */function S(t,A,e,n){function i(c){return c instanceof e?c:new e(function(o){o(c)})}return new(e||(e=Promise))(function(c,o){function a(E){try{s(n.next(E))}catch(B){o(B)}}function g(E){try{s(n.throw(E))}catch(B){o(B)}}function s(E){E.done?c(E.value):i(E.value).then(a,g)}s((n=n.apply(t,[])).next())})}class d{constructor(){this.mutex=Promise.resolve()}lock(){let A=()=>{};return this.mutex=this.mutex.then(()=>new Promise(A)),new Promise(e=>{A=e})}dispatch(A){return S(this,void 0,void 0,function*(){const e=yield this.lock();try{return yield Promise.resolve(A())}finally{e()}})}}var H;function fA(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}const P=fA(),U=(H=P.Buffer)!==null&&H!==void 0?H:null,DA=P.TextEncoder?new P.TextEncoder:null;function cA(t,A){return(t&15)+(t>>6|t>>3&8)<<4|(A&15)+(A>>6|A>>3&8)}function zA(t,A){const e=A.length>>1;for(let n=0;n<e;n++){const i=n<<1;t[n]=cA(A.charCodeAt(i),A.charCodeAt(i+1))}}function qA(t,A){if(t.length!==A.length*2)return!1;for(let e=0;e<A.length;e++){const n=e<<1;if(A[e]!==cA(t.charCodeAt(n),t.charCodeAt(n+1)))return!1}return!0}const $=87,_=48;function AA(t,A,e){let n=0;for(let i=0;i<e;i++){let c=A[i]>>>4;t[n++]=c>9?c+$:c+_,c=A[i]&15,t[n++]=c>9?c+$:c+_}return String.fromCharCode.apply(null,t)}const eA=U!==null?t=>{if(typeof t=="string"){const A=U.from(t,"utf8");return new Uint8Array(A.buffer,A.byteOffset,A.length)}if(U.isBuffer(t))return new Uint8Array(t.buffer,t.byteOffset,t.length);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Invalid data type!")}:t=>{if(typeof t=="string")return DA.encode(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Invalid data type!")},tA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=new Uint8Array(256);for(let t=0;t<tA.length;t++)F[tA.charCodeAt(t)]=t;function wA(t){let A=Math.floor(t.length*.75);const e=t.length;return t[e-1]==="="&&(A-=1,t[e-2]==="="&&(A-=1)),A}function MA(t){const A=wA(t),e=t.length,n=new Uint8Array(A);let i=0;for(let c=0;c<e;c+=4){const o=F[t.charCodeAt(c)],a=F[t.charCodeAt(c+1)],g=F[t.charCodeAt(c+2)],s=F[t.charCodeAt(c+3)];n[i]=o<<2|a>>4,i+=1,n[i]=(a&15)<<4|g>>2,i+=1,n[i]=(g&3)<<6|s&63,i+=1}return n}const R=16*1024,M=4,FA=new d,b=new Map;function kA(t,A){return S(this,void 0,void 0,function*(){let e=null,n=null,i=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");const c=(I,r=0)=>{n.set(I,r)},o=()=>n,a=()=>e.exports,g=I=>{e.exports.Hash_SetMemorySize(I);const r=e.exports.Hash_GetBuffer(),Q=e.exports.memory.buffer;n=new Uint8Array(Q,r,I)},s=()=>new DataView(e.exports.memory.buffer).getUint32(e.exports.STATE_SIZE,!0),E=FA.dispatch(()=>S(this,void 0,void 0,function*(){if(!b.has(t.name)){const r=MA(t.data),Q=WebAssembly.compile(r);b.set(t.name,Q)}const I=yield b.get(t.name);e=yield WebAssembly.instantiate(I,{})})),B=()=>S(this,void 0,void 0,function*(){e||(yield E);const I=e.exports.Hash_GetBuffer(),r=e.exports.memory.buffer;n=new Uint8Array(r,I,R)}),h=(I=null)=>{i=!0,e.exports.Hash_Init(I)},u=I=>{let r=0;for(;r<I.length;){const Q=I.subarray(r,r+R);r+=Q.length,n.set(Q),e.exports.Hash_Update(Q.length)}},k=I=>{if(!i)throw new Error("update() called before init()");const r=eA(I);u(r)},y=new Uint8Array(A*2),z=(I,r=null)=>{if(!i)throw new Error("digest() called before init()");return i=!1,e.exports.Hash_Final(r),I==="binary"?n.slice(0,A):AA(y,n,A)},N=()=>{if(!i)throw new Error("save() can only be called after init() and before digest()");const I=e.exports.Hash_GetState(),r=s(),Q=e.exports.memory.buffer,C=new Uint8Array(Q,I,r),w=new Uint8Array(M+r);return zA(w,t.hash),w.set(C,M),w},p=I=>{if(!(I instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");const r=e.exports.Hash_GetState(),Q=s(),C=M+Q,w=e.exports.memory.buffer;if(I.length!==C)throw new Error(`Bad state length (expected ${C} bytes, got ${I.length})`);if(!qA(t.hash,I.subarray(0,M)))throw new Error("This state was written by an incompatible hash implementation");const aA=I.subarray(M);new Uint8Array(w,r,Q).set(aA),i=!0},m=I=>typeof I=="string"?I.length<R/4:I.byteLength<R;let q=m;switch(t.name){case"argon2":case"scrypt":q=()=>!0;break;case"blake2b":case"blake2s":q=(I,r)=>r<=512&&m(I);break;case"blake3":q=(I,r)=>r===0&&m(I);break;case"xxhash64":case"xxhash3":case"xxhash128":case"crc64":q=()=>!1;break}const oA=(I,r=null,Q=null)=>{if(!q(I,r))return h(r),k(I),z("hex",Q);const C=eA(I);return n.set(C),e.exports.Hash_Calculate(C.length,r,Q),AA(y,n,A)};return yield B(),{getMemory:o,writeMemory:c,getExports:a,setMemorySize:g,init:h,update:k,digest:z,save:N,load:p,calculate:oA,hashLength:A}})}new d;new d;new d;new d;new d;new d;new d;new d;new d;new d;new d;var RA="sha256",SA="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c2pBx6KerX1qIhkgASADcyACcSABIANxcyABQR53IAFBE3dzIAFBCndzaiAaaiICaiIJIBMgEnNxIBJzaiAJQRp3IAlBFXdzIAlBB3dzakHRxqk2aiIaIAIgAXMgA3EgAiABcXMgAkEedyACQRN3cyACQQp3c2ogGGoiA2oiESAJIBNzcSATc2ogEUEadyARQRV3cyARQQd3c2pB59KkoQFqIhggAyACcyABcSADIAJxcyADQR53IANBE3dzIANBCndzaiAUaiIBaiISIBEgCXNxIAlzaiASQRp3IBJBFXdzIBJBB3dzakGFldy9AmoiFCABIANzIAJxIAEgA3FzIAFBHncgAUETd3MgAUEKd3NqIBdqIgJqIhMgI2ogJiASaiAiIBFqICUgCWogEyASIBFzcSARc2ogE0EadyATQRV3cyATQQd3c2pBuMLs8AJqIhcgAiABcyADcSACIAFxcyACQR53IAJBE3dzIAJBCndzaiAZaiIDaiIJIBMgEnNxIBJzaiAJQRp3IAlBFXdzIAlBB3dzakH827HpBGoiGSADIAJzIAFxIAMgAnFzIANBHncgA0ETd3MgA0EKd3NqIBpqIgFqIhEgCSATc3EgE3NqIBFBGncgEUEVd3MgEUEHd3NqQZOa4JkFaiIaIAEgA3MgAnEgASADcXMgAUEedyABQRN3cyABQQp3c2ogGGoiAmoiEiARIAlzcSAJc2ogEkEadyASQRV3cyASQQd3c2pB1OapqAZqIhggAiABcyADcSACIAFxcyACQR53IAJBE3dzIAJBCndzaiAUaiIDaiITaiAoIBJqICQgEWogJyAJaiATIBIgEXNxIBFzaiATQRp3IBNBFXdzIBNBB3dzakG7laizB2oiFCADIAJzIAFxIAMgAnFzIANBHncgA0ETd3MgA0EKd3NqIBdqIgFqIgkgEyASc3EgEnNqIAlBGncgCUEVd3MgCUEHd3NqQa6Si454aiIXIAEgA3MgAnEgASADcXMgAUEedyABQRN3cyABQQp3c2ogGWoiAmoiESAJIBNzcSATc2ogEUEadyARQRV3cyARQQd3c2pBhdnIk3lqIhkgAiABcyADcSACIAFxcyACQR53IAJBE3dzIAJBCndzaiAaaiIDaiISIBEgCXNxIAlzaiASQRp3IBJBFXdzIBJBB3dzakGh0f+VemoiGiADIAJz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",xA="8c18dd94",pA={name:RA,data:SA,hash:xA};new d;new d;function mA(){return kA(pA,32).then(t=>{t.init(256);const A={init:()=>(t.init(256),A),update:e=>(t.update(e),A),digest:e=>t.digest(e),save:()=>t.save(),load:e=>(t.load(e),A),blockSize:64,digestSize:32};return A})}new d;new d;new d;new d;new d;new d;new d;new d;new d;const JA=IA.cacheName||"transformers-cache";class f{constructor(){this.activeDownloads=new Map,this.queue=[],this.activeCount=0,this.MAX_CONCURRENT_FILES=2,this.quotaErrorHandler=null,this.quotaErrorAcknowledged=!1,this.store=new Y}isQuotaError(A){return A instanceof DOMException?A.name==="QuotaExceededError"||A.code===22||A.message.includes("quota"):A instanceof Error?A.message.toLowerCase().includes("quota")||A.message.toLowerCase().includes("storage"):!1}async handleQuotaError(){if(this.quotaErrorAcknowledged)return!0;if(this.quotaErrorHandler){const A=await this.quotaErrorHandler();return this.quotaErrorAcknowledged=!0,A}return console.warn("Quota exceeded and no handler registered"),!1}static getInstance(){return f.instance||(f.instance=new f),f.instance}getCache(){return caches.open(JA)}extractFilename(A){return A.split("/").pop()||"unknown"}setQuotaErrorHandler(A){this.quotaErrorHandler=A}async downloadFile(A,e){const n=await this.getCache(),i=await n.match(A);if(i){const c=i.headers.get("Content-Length"),o=c?parseInt(c,10):0;if(o>0){e==null||e({loaded:o,total:o,file:this.extractFilename(A)});return}}await this.scheduleDownload(A,e),await this.finalizeCache(A,n)}async scheduleDownload(A,e){if(this.activeDownloads.has(A)){for(;this.activeDownloads.has(A);)await new Promise(n=>setTimeout(n,100));return}return new Promise((n,i)=>{this.queue.push({url:A,onProgress:e,resolve:n,reject:i}),this.processQueue()})}async processQueue(){if(this.activeCount>=this.MAX_CONCURRENT_FILES)return;const A=this.queue.shift();if(!A)return;this.activeCount++;const{url:e,onProgress:n,resolve:i,reject:c}=A,o=new gA(e,this.store,{onProgress:a=>{n==null||n({loaded:a.loaded,total:a.total,file:this.extractFilename(e)})}});this.activeDownloads.set(e,o);try{await o.start(),i()}catch(a){c(a)}finally{this.activeDownloads.delete(e),this.activeCount--,this.processQueue()}}async finalizeCache(A,e){const n=await this.store.getMetadata(A);if(!n)throw new Error(`Download failed: Metadata missing for ${A}`);const i=await this.store.getStream(A),c=new Response(i,{headers:{"Content-Length":n.totalBytes.toString(),"Content-Type":n.mimeType||"application/octet-stream"}});try{await e.put(A,c),await this.store.deleteFile(A)}catch(o){if(this.isQuotaError(o)){if(console.warn(`Quota exceeded when caching ${A}`,o),!await this.handleQuotaError())throw await this.store.deleteFile(A),new Error("Download aborted by user: storage quota exceeded");console.warn("Continuing without persistent cache storage")}else throw o}}async computeSha256(A){const e=await mA();if(e.init(),A.stream){const n=A.stream().getReader();for(;;){const{done:i,value:c}=await n.read();if(i)break;c&&e.update(c)}}else{const n=await A.arrayBuffer();e.update(new Uint8Array(n))}return e.digest()}async checkCacheIntegrity(A,e){const i=await(await this.getCache()).match(A);if(!i)return{ok:!1,missing:!0,reason:"File not found in cache"};const c=i.headers.get("Content-Length");if(!c)return{ok:!0};const o=parseInt(c,10),a=await i.clone().blob();if(a.size!==o)return{ok:!1,reason:`Size mismatch: expected ${o}, got ${a.size}`};if(e)try{const g=await this.computeSha256(a);if(g!==e)return{ok:!1,reason:`Checksum mismatch: expected ${e}, got ${g}`}}catch(g){return console.error("Checksum verification failed:",g),{ok:!1,reason:`Checksum calculation failed: ${g}`}}return{ok:!0}}async cancelDownload(A){const e=this.activeDownloads.get(A);if(e){e.abort();return}const n=this.queue.findIndex(i=>i.url===A);if(n!==-1){const i=this.queue[n];this.queue.splice(n,1),i.reject(new Error("Download cancelled"))}}async deleteFromCache(A){await this.cancelDownload(A),await(await this.getCache()).delete(A),await this.store.deleteFile(A)}}const HA=f.getInstance();export{f as DownloadManager,HA as downloadManager};
